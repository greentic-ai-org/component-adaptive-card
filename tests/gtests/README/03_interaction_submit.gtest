#SET OUT=${WORK_DIR}/interaction_submit.json
#MKDIR ${WORK_DIR}/artifacts
#MKDIR ${WORK_DIR}/artifacts/readme-gtests
#MKDIR ${WORK_DIR}/artifacts/readme-gtests/03_interaction_submit
#MKDIR ${WORK_DIR}/artifacts/readme-gtests/03_interaction_submit/artifacts
#RUN cp ${REPO_ROOT}/target/wasm32-wasip2/release/component_adaptive_card.wasm ${WORK_DIR}/component_adaptive_card.wasm
#EXPECT_EXIT 0
#RUN cp ${REPO_ROOT}/component.manifest.json ${WORK_DIR}/component.manifest.json
#EXPECT_EXIT 0
#RUN cp -R ${REPO_ROOT}/schemas ${WORK_DIR}/schemas
#EXPECT_EXIT 0
#RUN cp ${REPO_ROOT}/card.json ${WORK_DIR}/card.json
#EXPECT_EXIT 0
#RUN greentic-component test --wasm ./component_adaptive_card.wasm --manifest ./component.manifest.json --op card --input-json '{"card_source":"asset","card_spec":{"asset_path":"card.json","template_params":{}},"mode":"renderAndValidate","node_id":"readme-card","interaction":{"interaction_type":"Submit","action_id":"save","card_instance_id":"readme-card","raw_inputs":{"comment":"Hello from state"}}}' --state-dump
#EXPECT_EXIT 0
#CAPTURE_JSON > ${OUT}
#EXPECT_JSONPATH ${OUT} result.renderedCard.actions[*].id contains save
#EXPECT_JSONPATH ${OUT} result.stateUpdates[0].Merge.path equals form_data
#EXPECT_JSONPATH ${OUT} result.stateUpdates[0].Merge.value.comment equals Hello from state
#EXPECT_JSONPATH ${OUT} result.validationIssues[0] not_exists
#EXPECT_STDERR_CONTAINS eyJmb3JtX2RhdGEiOnsiY29tbWVudCI6IkhlbGxvIGZyb20gc3RhdGUifX0=
#SAVE_ARTIFACT ${OUT}
